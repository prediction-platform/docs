# å¦‚ä½•é›†æˆ YC365 Dapp

## æ¦‚è¿°

æœ¬æ–‡ä»‹ç»å•†æˆ·å¹³å°ä¸ YC365 Dapp çš„äº¤äº’æ–¹å¼ã€‚é€šä¿¡æ”¯æŒä¸¤ç§æ¨¡å¼ï¼šå…è½¬è´¦æ¨¡å¼ï¼ˆv1ï¼‰ä¸è½¬è´¦æ¨¡å¼ï¼ˆv2ï¼‰ã€‚

- **å…è½¬è´¦æ¨¡å¼**
  
  ç”¨æˆ·ä»å•†æˆ·å¹³å°è¿›å…¥ Dapp æ—¶æ— éœ€å……å€¼ã€‚ä¸‹å•æ—¶ï¼Œèµ„é‡‘ç›´æ¥ä»å¹³å°è´¦æˆ·æ‰£é™¤ï¼ŒDapp åå°ä¸å¹³å°ä¿æŒå®æ—¶é€šä¿¡ã€‚

  ![img.png](../img/yc365/img_11.png)

- **è½¬è´¦æ¨¡å¼**

  ç”¨æˆ·è¿›å…¥ Dapp æ—¶ï¼Œéœ€è¦å°†å¹³å°è´¦æˆ·ä¸­çš„éƒ¨åˆ†èµ„äº§åˆ’è½¬è‡³ Dapp è´¦æˆ·ã€‚Dapp åå°ç›¸å¯¹ç‹¬ç«‹äºå¹³å°ï¼Œæ— éœ€å®æ—¶é€šä¿¡ã€‚

  ![img.png](../img/yc365/img_10.png)

## ğŸ¯ ä¸»è¦åŠŸèƒ½

1. **è·å–æ³¨å†Œé‚€è¯·ç **ï¼šé€šè¿‡ä¸ YC365 å•†åŠ¡ä»£è¡¨çº¿ä¸‹æ²Ÿé€šè·å–ã€‚ä¸€ä¸ªé‚€è¯·ç ä»…é™ä¸€ä¸ªå•†æˆ·è´¦å·ä½¿ç”¨ã€‚
2. **å•†æˆ·æ³¨å†Œ**ï¼šæ­¤æ¥å£éœ€è¦çº¿ä¸‹ç”³è¯·å¼€é€šã€‚å•†æˆ·æˆ– YC365 å•†åŠ¡æäº¤å¿…è¦å‚æ•°åå³å¯æ³¨å†Œã€‚æ³¨å†Œå®Œæˆå°†è·å¾— `app_id`ã€`api_key`ã€`wallet_address` ç­‰å…³é”®ä¿¡æ¯ï¼Œå¿…é¡»å¦¥å–„ä¿ç®¡ã€‚
   - æ³¨å†Œå‰éœ€å‡†å¤‡ç›¸å…³æ¥å£ï¼Œå¹¶ç¡®è®¤ä½¿ç”¨ v1 è¿˜æ˜¯ v2 æ¨¡å¼ï¼Œä¸åŒæ¨¡å¼æ‰€éœ€æ¥å£ä¸åŒã€‚
   - æ³¨å†Œå¾—åˆ°çš„ `app_id` ä¸ `api_key` å»ºè®®å­˜æ”¾äºå•†æˆ·åå°ï¼Œå…¶ä¸­ `api_key` ç”¨äºä¸ Dapp åå°è¿›è¡ŒåŠ å¯†é€šä¿¡ã€‚
   - `wallet_address` æ˜¯å•†æˆ·åœ¨ Dapp ä¸­çš„ BSC é’±åŒ…åœ°å€ï¼Œéœ€è¦å……å€¼ USDTã€‚
3. **è·å– Dapp è®¿é—®åœ°å€**ï¼šå½“ç”¨æˆ·åœ¨å¹³å°é¡µé¢ç‚¹å‡»æ–‡æœ¬é“¾æ¥æˆ–å›¾æ ‡æ—¶ï¼Œå¹³å°åå°è°ƒç”¨è¯¥æ¥å£å¹¶æºå¸¦å¿…è¦å‚æ•°ï¼Œä»¥è·å– Dapp åœ°å€ã€‚
4. **è®¢å•è¯¦æƒ…**ï¼šå•†æˆ·å¯åœ¨ Dapp ä¸­æŸ¥çœ‹äº¤æ˜“æ˜ç»†ï¼Œæ–¹ä¾¿åŒæ–¹å¯¹è´¦ã€‚
5. **å•†æˆ·æŠ¥è¡¨**ï¼šæ”¯æŒæŸ¥çœ‹æ¯æ—¥ã€æ¯å‘¨ã€æ¯æœˆçš„æŠ¥è¡¨æ•°æ®ã€‚
6. **æ¯æ—¥æ±‡æ€»æ•°æ®æ¨é€**ï¼šDapp åå°ä¼šåœ¨ UTC æ—¶é—´æ¯æ—¥ 0 ç‚¹å‘å•†æˆ·æ¨é€ä¸Šä¸€æ—¥çš„æ±‡æ€»æ•°æ®ã€‚

æ•°æ®æ ¼å¼ç¤ºä¾‹ï¼š
```json
{
  "event_type": "merchant_overview", // ä¸šåŠ¡äº‹ä»¶ç±»å‹ï¼šæ¯æ—¥æ±‡æ€»æ•°æ®æ¨é€
  "data": {
     "app_id":"string",            // å•†æˆ· ID
     "balance":0.000000,           // å•†æˆ·å¯ç”¨ USDT
     "frozen":0.000000,            // å•†æˆ·å†»ç»“ USDT
     "period_date":"string",       // ç»Ÿè®¡å‘¨æœŸç¬¬ä¸€å¤©ï¼Œä¾‹å¦‚ 2025-08-01
     "users":0,                    // å•†æˆ·åœ¨ Dapp ä¸­çš„ç”¨æˆ·æ€»æ•°
     "total_deposit":0.000000,     // å……å€¼æ€»é¢ï¼Œv1 æ¨¡å¼ä¸º 0
     "total_deposit_count":0,      // å……å€¼æ¬¡æ•°ï¼Œv1 æ¨¡å¼ä¸º 0
     "total_withdraw":0.000000,    // æç°æ€»é¢ï¼Œv1 æ¨¡å¼ä¸º 0
     "total_withdraw_count":0,     // æç°æ¬¡æ•°ï¼Œv1 æ¨¡å¼ä¸º 0
     "total_buy_volume":0.000000,  // ä¹°å…¥æ€»é¢
     "total_sell_volume":0.000000, // å–å‡ºæ€»é¢
     "currency":"string"           // å¸ç§ï¼šUSDT
  },
  "signature": "xxxxxxxx"
}
```

## ğŸ›¡ï¸ çŠ¶æ€ç è¯´æ˜

| çŠ¶æ€ç  | å«ä¹‰ | æè¿° |
| ------ | ---- | ---- |
| 0 | OK | è¯·æ±‚æˆåŠŸ |
| 1 | Canceled | è¯·æ±‚è¢«å–æ¶ˆ |
| 2 | Unknown | æœªçŸ¥æœåŠ¡é”™è¯¯ |
| 3 | InvalidArgument | å‚æ•°æ— æ•ˆ |
| 7 | PermissionDenied | ç­¾åè®¤è¯å¤±è´¥ |
| 8 | ResourceExhausted | å½“å‰è¢«é™æµ |
| 13 | Internal | å†…éƒ¨æœåŠ¡é”™è¯¯ |

## ğŸ’¡ API æ¥å£

YC365 Dapp ä¸ºå•†æˆ·å¹³å°æä¾›ä»¥ä¸‹æ¥å£ï¼š

### 1. è·å–é‚€è¯·ç 

**GET** `/account/v1/app/invitecode`

é‚€è¯·ç éœ€çº¿ä¸‹é¢†å–ï¼Œä¸€ä¸ªè´¦å·ä¸€ä¸ªé‚€è¯·ç ã€‚è¯·æ±‚å¤´å¿…é¡»åŒ…å« `Authorization`ã€‚

**å“åº”ç¤ºä¾‹**
```json
{
   "code": 0,
   "message": "string",
   "data": "string"    // é‚€è¯·ç 
}
```

### 2. åˆ›å»ºå•†æˆ·

**POST** `/account/v1/app/create`

åˆ›å»ºå•†æˆ·å‰è¯·è”ç³»å•†åŠ¡ä»£è¡¨è·å–é‚€è¯·ç ã€‚

**è¯·æ±‚ä½“**
```json
{
   "app_name": "string",         // å•†æˆ·åç§°
   "app_desc": "string",         // å•†æˆ·æè¿°
   "api_version": "string",      // v1ï¼šå…è½¬è´¦æ¨¡å¼ï¼›v2ï¼šè½¬è´¦æ¨¡å¼
   "signature_method": "string", // ç›®å‰ä»…æ”¯æŒ hmac-sha256
   "assets_api": "string",
   "create_order_api": "string",
   "trade_order_api": "string",
   "cancel_order_api": "string",
   "settlement_api": "string",
   "webhook_api": "string",
   "invite_code": "string"       // é‚€è¯·ç 
}
```

**å“åº”ç¤ºä¾‹**
```json
{
    "code": 0,
    "message": "string",
    "data": {
        "app_id": "string",        // å•†æˆ· ID
        "api_key": "string",       // API å¯†é’¥
        "wallet_address": "string" // é’±åŒ…åœ°å€
    }
}
```

### 3. è·å– Dapp è®¿é—®åœ°å€

**POST** `/account/v1/app/access`

å¹³å°å¯è°ƒç”¨è¯¥æ¥å£ä¸ºç”¨æˆ·è·å– Dapp è®¿é—®é“¾æ¥ã€‚`Authorization` ç”± `app_id:signature`ï¼ˆbase64ï¼‰ç»„æˆã€‚åŠ ç­¾æ–¹å¼è¯¦è§åæ–‡ã€Œç­¾åè§„åˆ™ã€ã€‚

**è¯·æ±‚ä½“**
```json
{
   "user_id": "string",   // å•†æˆ·å¹³å°ä¸­çš„ç”¨æˆ·å”¯ä¸€ ID
   "user_name": "string", // ç”¨æˆ·æ˜µç§°
   "lang": "string",      // è¯­è¨€ï¼šenã€zh
   "email": "string",     // é‚®ç®±ï¼Œé€‰å¡«
   "phone": "string",     // æ‰‹æœºå·ç ï¼Œé€‰å¡«ï¼Œæ ¼å¼ +86 188xxxxxx
   "avatar": "string",    // å¤´åƒåœ°å€
   "timestamp": 0,        // å‘èµ·è¯·æ±‚çš„æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰
   "signature": "string"  // æ•°æ®ç­¾å
}
```

**å“åº”ç¤ºä¾‹**
```json
{
    "code": 0,
    "message": "string",
    "data": {
        "url": "string" // Dapp è®¿é—®åœ°å€
    }
}
```

### 4. åŒæ­¥èµ„äº§ï¼ˆä»… v1ï¼‰

**POST** `/account/v1/app/account/assets`

ç”¨äºå…è½¬è´¦æ¨¡å¼ä¸‹åŒæ­¥ç”¨æˆ·èµ„äº§ã€‚`Authorization` åŒä¸Šã€‚

**è¯·æ±‚ä½“**
```json
{
   "user_id": "string", // å•†æˆ·å¹³å°ç”¨æˆ·å”¯ä¸€ ID
   "assets": [
     {
       "asset": "string",   // èµ„äº§ç±»å‹ï¼šUSDT
       "balance": 0.000000, // å¯ç”¨ä½™é¢
       "frozen": 0.000000   // å†»ç»“ä½™é¢
     }
   ],
   "timestamp": 0,
   "signature": "string"
}
```

**å“åº”ç¤ºä¾‹**
```json
{
    "code": 0,
    "message": "string",
    "data": {}
}
```

### 5. åˆ›å»ºè®¢å•ï¼ˆä»… v1ï¼‰

**POST** `/account/v1/app/order/create`

å•†æˆ·ç”¨æˆ·ä¸‹å•å‰è°ƒç”¨ã€‚æ”¯ä»˜æˆåŠŸåè¿”å›è®¢å•çŠ¶æ€ã€‚`Authorization` åŒä¸Šã€‚

**è¯·æ±‚ä½“**
```json
{
   "user_id": "string",          // å•†æˆ·å¹³å°ç”¨æˆ·å”¯ä¸€ ID
   "order_id": "string",         // å•†æˆ·ç”Ÿæˆçš„è®¢å• ID
   "side": "buy/sell",           // ä¹°å…¥ / å–å‡º
   "outcome": "yes/no",          // yesï¼šä¹°æ¶¨ï¼›noï¼šä¹°è·Œ
   "market_id": "string",        // å¸‚åœº ID
   "price": 0.000000,            // ä¸‹å•ä»·æ ¼
   "quantity": 0.000000,         // ä¸‹å•æ•°é‡
   "amount": 0.000000,           // è®¢å•é‡‘é¢
   "fee": 0.000000,              // æ‰‹ç»­è´¹
   "timestamp": 0,
   "signature": "string"
}
```

**å“åº”ç¤ºä¾‹**
```json
{
    "code": 0,
    "message": "string",
    "data": {
        "status": "success",  // successï¼šæˆåŠŸï¼›failedï¼šå¤±è´¥
        "fail_reason": ""     // å¤±è´¥åŸå› 
    }
}
```

### 6. è®¢å•æ’®åˆå›è°ƒï¼ˆä»… v1ï¼‰

**POST** `/account/v1/app/order/trade`

å½“è®¢å•åœ¨ Dapp ä¾§æˆäº¤æ—¶å›è°ƒã€‚å•†æˆ·éœ€è¿”å›å¤„ç†ç»“æœã€‚

**è¯·æ±‚ä½“**
```json
{
   "order_id": "string",          // å•†æˆ·è®¢å• ID
   "trade_id": "string",          // æˆäº¤ ID
   "side": "buy/sell",            // æ–¹å‘
   "outcome": "yes/no",           // yesï¼šä¹°æ¶¨ï¼›noï¼šä¹°è·Œ
   "price": 0.000000,             // æˆäº¤ä»·æ ¼
   "quantity": 0.000000,          // æˆäº¤æ•°é‡
   "amount": 0.000000,            // æˆäº¤é‡‘é¢
   "fee": 0.000000,               // æ‰‹ç»­è´¹
   "timestamp": 0,
   "signature": "string"
}
```

**å“åº”ç¤ºä¾‹**
```json
{
    "code": 0,
    "message": "string",
    "data": {}
}
```

### 7. å–æ¶ˆè®¢å•å›è°ƒï¼ˆä»… v1ï¼‰

**POST** `/account/v1/app/order/cancel`

è®¢å•åœ¨ Dapp ä¾§è¢«å–æ¶ˆæ—¶å›è°ƒã€‚å•†æˆ·éœ€è¿”å›å¤„ç†ç»“æœã€‚

**è¯·æ±‚ä½“**
```json
{
   "order_id": "string",  // å•†æˆ·è®¢å• ID
   "timestamp": 0,
   "signature": "string"
}
```

**å“åº”ç¤ºä¾‹**
```json
{
    "code": 0,
    "message": "string",
    "data": {}
}
```

### 8. ç»“ç®—å›è°ƒï¼ˆä»… v1ï¼‰

**POST** `/account/v1/app/order/settlement`

å¸‚åœºç»“ç®—åå›è°ƒï¼Œé€šçŸ¥å•†æˆ·ç›ˆäºä¿¡æ¯ã€‚

**è¯·æ±‚ä½“**
```json
{
   "market_id": "string",       // å¸‚åœº ID
   "user_id": "string",         // å•†æˆ·å¹³å°ç”¨æˆ· ID
   "outcome": "yes/no",         // ç”¨æˆ·æŒæœ‰çš„ç»“æœ
   "quantity": 0.000000,        // ç»“ç®—æ•°é‡
   "payout": 0.000000,          // ç»“ç®—é‡‘é¢
   "timestamp": 0,
   "signature": "string"
}
```

**å“åº”ç¤ºä¾‹**
```json
{
    "code": 0,
    "message": "string",
    "data": {}
}
```

### 9. è®¢å•è¯¦æƒ…æŸ¥è¯¢

**GET** `/account/v1/app/order/detail`

å•†æˆ·å¯æŸ¥è¯¢è®¢å•çŠ¶æ€åŠæ˜ç»†ã€‚

**è¯·æ±‚å‚æ•°**
```
order_id=string
```

**å“åº”ç¤ºä¾‹**
```json
{
    "code": 0,
    "message": "string",
    "data": {
        "order_id": "string",
        "user_id": "string",
        "status": "string",   // è®¢å•çŠ¶æ€
        "trades": [           // æˆäº¤åˆ—è¡¨
           {
              "trade_id": "string",
              "price": 0.000000,
              "quantity": 0.000000,
              "amount": 0.000000,
              "fee": 0.000000,
              "created_at": "string"
           }
        ]
    }
}
```

### 10. å•†æˆ·æŠ¥è¡¨

**GET** `/account/v1/app/report`

å¯æŒ‰æ—¥æœŸåŒºé—´æŸ¥è¯¢æŠ¥è¡¨æ•°æ®ã€‚

**è¯·æ±‚å‚æ•°**
```
start_date=string   // yyyy-MM-dd
end_date=string     // yyyy-MM-dd
```

**å“åº”ç¤ºä¾‹**
```json
{
    "code": 0,
    "message": "string",
    "data": [
       {
          "period_date": "string",       // æŠ¥è¡¨æ—¥æœŸ
          "users": 0,                    // æ´»è·ƒç”¨æˆ·æ•°
          "total_deposit": 0.000000,     // å……å€¼é‡‘é¢
          "total_withdraw": 0.000000,    // æç°é‡‘é¢
          "total_buy_volume": 0.000000,  // ä¹°å…¥æˆäº¤é¢
          "total_sell_volume": 0.000000, // å–å‡ºæˆäº¤é¢
          "currency": "string"           // å¸ç§
       }
    ]
}
```

## ğŸ” ç­¾åè§„åˆ™

æ‰€æœ‰éœ€è¦ç­¾åçš„æ¥å£å‡ä½¿ç”¨ `HMAC-SHA256`ã€‚ç­¾åæ­¥éª¤ï¼š

1. å°†è¯·æ±‚ä½“ï¼ˆJSON å­—ç¬¦ä¸²ï¼‰æŒ‰ UTF-8 ç¼–ç ï¼›
2. ä½¿ç”¨å•†æˆ· `api_key` ä½œä¸ºå¯†é’¥ï¼Œå¯¹è¯·æ±‚ä½“è®¡ç®— `HMAC-SHA256`ï¼›
3. å°†ç»“æœè½¬æˆåå…­è¿›åˆ¶å­—ç¬¦ä¸²ï¼Œå³ä¸º `signature`ã€‚

ç¤ºä¾‹ Python ä»£ç ï¼š
```python
import hmac
import hashlib

def sign(payload: str, api_key: str) -> str:
    return hmac.new(api_key.encode('utf-8'),
                    payload.encode('utf-8'),
                    hashlib.sha256).hexdigest()
```

## ğŸ“„ é™„å½•

- æ¥å£è¿”å›å€¼ç»Ÿä¸€åŒ…å« `code`ã€`message`ã€`data` ä¸‰éƒ¨åˆ†ã€‚
- è¯·æ±‚ä¸å“åº”å‡ä½¿ç”¨ JSON æ ¼å¼ï¼Œæ•°å€¼ä¿ç•™ 6 ä½å°æ•°ã€‚
- æ‰€æœ‰æ—¶é—´å‡ä¸º UTC æ—¶é—´ã€‚
- å»ºè®®å•†æˆ·åå°å¯¹æ¥å£è°ƒç”¨è¿›è¡Œæ—¥å¿—è®°å½•ï¼Œä¾¿äºæ’æŸ¥é—®é¢˜ã€‚
